### 用户、权限
`Windows、MacOS、Linux` 均采用多用户的管理模式进行权限管理

### 一、用户
#### 1. root 用户
* `root`用户拥有最大的系统操作权限，
* 普通用户在 `/home/用户名` 目录内是不受限的，其他位置，普通用户仅有只读和执行权限，无修改权限

#### 2. 用户切换 Switch User
* 语法： `su [-] [用户名]`，用户名也可以省略，
  * `-` 表示切换用户后加载环境变量
  * 用户名表示要切换到哪个用户，省略表示切换到 `root`
* 普通用户，切换到其它用户需要输入密码，`root`用户切换到其它用户，无需密码
* 切换用户后，可以通过`exit`命令退回上一个用户，也可以使用快捷键：`ctrl + d`


#### 3. sudo 命令
* 作用：让普通用户执行命令时临时以`root`身份执行
* 前提：为普通用户配置`sudo`认证
* 语法：在命令之前，带上 `sudo` 即可

#### 3. sudo 认证
* ① 切换到 `root` 用户：`su`，输入密码
* ② 编辑认证： 执行`visudo`命令，会自动通过`vi`编辑器打开`/etc/sudoers`
* ③ 添加内容 `fgq233 ALL=(ALL)   NOPASSWD: ALL`，保存退出
* ④ 切换为普通用户：`exit`
* ⑤ 测试：`sudo touch /a.txt`、`sudo rm /a.txt`


### 二、用户组
#### 1. 用户、用户组
* 用户组就是多个用户的组合
* Linux中可以配置多个`用户`、也可以配置多个`用户组`，一个用户可以加入多个用户组
* Linux中权限管控级别有2个级别
  * 针对用户的权限控制
  * 针对用户组的权限控制


#### 2. 用户组相关命令（root用户才有权限）
* 创建用户组：`groupadd 用户组名`
* 删除用户组：`groupdel 用户组名`


#### 3. 用户相关命令（root用户才有权限）
* 创建用户：`useradd [-g -d] 用户名`
  * `-g`指定用户的组，不指定的话会创建同名组并自动加入，指定`-g`需要组已经存在，如已存在同名组，必须使用`-g`
  * `-d`指定`用户HOME路径`，不指定，默认为：`/home/用户名`

* 添加密码：`passwd 用户名`

* 删除用户：`userdel [-r] 用户名`
  * `-r` 删除用户的HOME目录，不使用`-r`，删除用户时，`/home/用户名`目录保留
  
* 查看用户所属组：`id [用户名]`，不指定用户名默认查看自身

* 修改用户所属组：`usermod -aG 用户组 用户名`


#### 4. getent命令
* `getent passwd`，查看当前系统中有哪些用户
* `getent group`，查看当前系统中有哪些用户组



### 三、权限
#### 1. 列出目录
![](https://fgq233.github.io/imgs/linux/linux03.png)

* `1` 表示文件、文件夹的权限控制信息
* `2` 表示文件、文件夹所属用户
* `3` 表示文件、文件夹所属用户组

#### 2. 权限信息
* 权限一列总共分为10个槽位 
* `r` 读权限，`w` 写权限，`x` 执行权限，`-` 无权限

![](https://fgq233.github.io/imgs/linux/linux04.png)


#### 3. chmod 命令修改权限(字母权限)
> 只有文件、文件夹的所属用户或root用户可以修改

* 语法1：`chmod [-R] ugo权限  目标文件夹/目录`，
  * `-R` 对文件夹内的全部内容应用同样的操作
  * `ugo` 分别表示：用户权限、用户组权限、其它用户权限

* 示例1：`chmod u=rwx, g=rx, o=x a.txt`，将文件权限修改为：`rwxr-x--x`
* 示例2：`chmod -R u=rwx, g=rx, o=x a`，将文件夹及里面全部内容权限设置为：`rwxr-x--x`

#### 4. chmod 命令修改权限(数字权限)
* 权限可以用3位数字来代表，分别表示：用户权限、用户组权限、其它用户权限
* 语法：`chmod [-R] 三位数字权限  目标文件夹/目录`，
* 数字信息如下：`r`记为4，`w`记为2，`x`记为1，所以有下面7种权限
  * `0` 无任何权限  `---`
  * `1` 仅有x权限   `--x`
  * `2` 仅有w权限  `-w-`
  * `3` 有w和x权限  `-wx`
  * `4` 仅有r权限  `r--`
  * `5` 有r和x权限  `r-x`
  * `6` 有r和w权限  `rw-`
  * `7` 有全部权限  `rwx`
  
* 示例：`chmod 751 a.txt`，表示将文件夹及里面全部内容权限设置为：`rwxr-x--x`


#### 5. chown 命令
> 此命令只适用于root用户执行


* 作用：修改文件、文件夹的所属用户、用户组
* 语法：`chown [-R] [用户] [:]  [用户组] 目标文件夹/目录`
  * `-R` 对文件夹内的全部内容应用同样的操作
  * 修改目标的所属用户
  * 修改目标的所属用户组
  * `:`用于分隔用户和用户组

* 示例1：`chown root a.txt`，将`a.txt`所属用户修改为`root`
* 示例2：`chown :root a.txt`， 将`a.txt`所属用户组修改为`root`
* 示例3：`chown root:root a.txt`，将`a.txt`所属用户、用户组都修改为`root`
